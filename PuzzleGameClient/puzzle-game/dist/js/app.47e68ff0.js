(function(){"use strict";var e={8466:function(e,t,s){var o=s(6369),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isStartGameScreenShown,expression:"isStartGameScreenShown"}],staticStyle:{"z-index":"2"},attrs:{id:"start-game-screen"}},[t("button",{on:{click:e.startGame}},[e._v("Start Game")])]),t("add-score-form",{directives:[{name:"show",rawName:"v-show",value:e.isAddScoreFormShown,expression:"isAddScoreFormShown"}],staticStyle:{"z-index":"2"},attrs:{gameTimeSeconds:e.gameTimeSeconds,movesCount:e.movesCount,quitForm:e.onQuitAddScoreForm}}),t("game-scores",{directives:[{name:"show",rawName:"v-show",value:e.isScoresShown,expression:"isScoresShown"}],ref:"scores",staticStyle:{"z-index":"2"},attrs:{quitScores:e.onQuitScores}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isBlurScreen,expression:"isBlurScreen"}],staticStyle:{"z-index":"1"},attrs:{id:"blur-screen"}}),t("puzzle-game",{ref:"game",staticStyle:{"z-index":"0"},attrs:{gameOver:e.onGameOver}})],1)},n=[],r=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:"pieces-container"}},e._l(e.pieces,(function(s,o){return t("div",{staticClass:"piece",style:{left:25*s.x+"%",top:25*s.y+"%"},on:{click:function(t){return e.movePiece(s)}}},[t("img",{attrs:{src:`${e.base_pieces_path}piece_${o+1}.jpg`}})])})),0)])},c=[],a=(s(7658),{props:["gameOver"],data:function(){return{base_pieces_path:({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_WEB_API??"")+"static/pieces/",pieces:null,empty_cell:null,isGameOn:!1,startTime:null,movesCount:0}},methods:{isPuzzleSolved:function(){for(let e of this.pieces)if(e.x+4*e.y!=e.index)return!1;return!0},isPuzzleSolvable:function(){const e=this.pieces.map((e=>e.x+4*e.y));let t=!0;for(let s=0;s<14;s++)for(let o=s+1;o<15;o++)e[s]>e[o]&&(t=!t);return t},placePieces:function(){this.pieces=[];for(let e=0;e<4;e++)for(let t=0;t<(3==e?3:4);t++)this.pieces.push({index:t+4*e,x:t,y:e});this.empty_cell={x:3,y:3}},shufflePieces:function(){for(let e=14;e>0;e--){let t=Math.floor(Math.random()*(e+1)),s={x:this.pieces[e].x,y:this.pieces[e].y};this.pieces[e].x=this.pieces[t].x,this.pieces[e].y=this.pieces[t].y,this.pieces[t].x=s.x,this.pieces[t].y=s.y}},movePiece:function(e){if(this.isGameOn&&Math.abs(e.x-this.empty_cell.x)+Math.abs(e.y-this.empty_cell.y)==1){let t={x:e.x,y:e.y};e.x=this.empty_cell.x,e.y=this.empty_cell.y,this.empty_cell.x=t.x,this.empty_cell.y=t.y,this.movesCount++,this.isPuzzleSolved()&&this.endGame()}},startGame:function(){this.placePieces(),setTimeout((()=>{while(1)if(this.shufflePieces(),!this.isPuzzleSolved()&&this.isPuzzleSolvable()){this.isGameOn=!0,this.movesCount=0,this.startTime=Date.now();break}}),2e3)},endGame:function(){this.isGameOn=!1;const e=Math.floor((Date.now()-this.startTime)/1e3);this.gameOver(e,this.movesCount)}}}),u=a,m=s(1001),l=(0,m.Z)(u,r,c,!1,null,"527dfc1a",null),h=l.exports,d=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:"form-container"}},[t("div",[t("h1",[e._v("Scores:")]),t("p",[t("b",[e._v("Total time spent - "+e._s(e.secondsToTime(e.gameTimeSeconds)))])]),t("p",[t("b",[e._v("Total moves made - "+e._s(e.movesCount))])])]),t("div",{attrs:{id:"form-block"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),t("button",{on:{click:e.addScore}},[e._v("Submit")])])])])},p=[],v={props:["gameTimeSeconds","movesCount","quitForm"],data:function(){return{name:""}},methods:{addScore:async function(){await fetch(({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_WEB_API??"")+"api/score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Name:this.name,TimeSeconds:this.gameTimeSeconds,MovesAmount:this.movesCount})}).catch((e=>console.error("Failed to add score",e))),this.quitForm(this.name)}}},f=v,S=(0,m.Z)(f,d,p,!1,null,"2e0bfa3e",null),_=S.exports,w=function(){var e=this,t=e._self._c;return t("div",[t("div",{attrs:{id:"scores-container"}},[t("div",{attrs:{id:"scores"}},[t("game-score",{directives:[{name:"show",rawName:"v-show",value:e.isMyScoresShown,expression:"isMyScoresShown"}],attrs:{id:"my-scores",title:`Scores by time of player ${e.user_name}`,scores:e.user_scores,isNameColumnHidden:!0}}),t("game-score",{directives:[{name:"show",rawName:"v-show",value:e.isTopScoresShown,expression:"isTopScoresShown"}],attrs:{id:"top-scores",title:`Top ${e.top} scores by time`,scores:e.top_scores}})],1),t("div",[t("button",{on:{click:e.switchShownScores}},[e._v("Switch Scores")]),t("button",{on:{click:e.quitScores}},[e._v("Quit")])])])])},y=[],x=function(){var e=this,t=e._self._c;return t("div",[t("table",[t("caption",[t("b",[e._v(e._s(e.title))])]),t("thead",[t("tr",[t("th"),t("th",{directives:[{name:"show",rawName:"v-show",value:!e.isNameColumnHidden,expression:"!isNameColumnHidden"}]},[e._v("Name")]),t("th",[e._v("Time")]),t("th",[e._v("Moves")])])]),t("tbody",e._l(e.scores,(function(s,o){return t("tr",[t("td",[e._v(e._s(o+1))]),t("td",{directives:[{name:"show",rawName:"v-show",value:!e.isNameColumnHidden,expression:"!isNameColumnHidden"}]},[e._v(e._s(s.name))]),t("td",[e._v(e._s(s.time))]),t("td",[e._v(e._s(s.moves))])])})),0)])])},b=[],T={props:["title","scores","isNameColumnHidden"]},g=T,O=(0,m.Z)(g,x,b,!1,null,"62ac7410",null),P=O.exports,N={props:["quitScores"],components:{GameScore:P},data:function(){return{user_name:null,top:10,top_scores:null,user_scores:null,isMyScoresShown:!0,isTopScoresShown:!1}},methods:{mapDTO:function(e){return{name:e.name,time:this.secondsToTime(e.timeSeconds),moves:e.movesAmount}},loadScores:function(e){this.user_name=e;const t={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_WEB_API??"";fetch(t+"api/score/top/"+this.top).then((e=>e.json())).then((e=>this.top_scores=e.map(this.mapDTO))),fetch(t+"api/score/"+e).then((e=>e.json())).then((e=>this.user_scores=e.map(this.mapDTO)))},switchShownScores:function(){this.isMyScoresShown=!this.isMyScoresShown,this.isTopScoresShown=!this.isTopScoresShown}}},z=N,C=(0,m.Z)(z,w,y,!1,null,"2df19c90",null),G=C.exports,A={name:"app",components:{PuzzleGame:h,AddScoreForm:_,GameScores:G},data:function(){return{isStartGameScreenShown:!0,isBlurScreen:!0,isAddScoreFormShown:!1,isScoresShown:!1,gameTimeSeconds:null,movesCount:null}},methods:{startGame:function(){this.isStartGameScreenShown=!1,this.isBlurScreen=!1,this.$refs.game.startGame()},onGameOver:function(e,t){this.isBlurScreen=!0,this.isAddScoreFormShown=!0,this.gameTimeSeconds=e,this.movesCount=t},onQuitAddScoreForm:function(e){this.isAddScoreFormShown=!1,this.isScoresShown=!0,this.$refs.scores.loadScores(e)},onQuitScores:function(){this.isScoresShown=!1,this.isStartGameScreenShown=!0}}},E=A,M=(0,m.Z)(E,i,n,!1,null,null,null),F=M.exports;o.ZP.config.productionTip=!1,o.ZP.prototype.secondsToTime=e=>{const t=Math.floor(e/3600);e%=3600;const s=Math.floor(e/60);return e%=60,`${t}:${s}:${e}`},new o.ZP({render:e=>e(F)}).$mount("#app")}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,i,n){if(!o){var r=1/0;for(m=0;m<e.length;m++){o=e[m][0],i=e[m][1],n=e[m][2];for(var c=!0,a=0;a<o.length;a++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[a])}))?o.splice(a--,1):(c=!1,n<r&&(r=n));if(c){e.splice(m--,1);var u=i();void 0!==u&&(t=u)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[o,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,n,r=o[0],c=o[1],a=o[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(i in c)s.o(c,i)&&(s.m[i]=c[i]);if(a)var m=a(s)}for(t&&t(o);u<r.length;u++)n=r[u],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(m)},o=self["webpackChunkpuzzle_game"]=self["webpackChunkpuzzle_game"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(8466)}));o=s.O(o)})();
//# sourceMappingURL=app.47e68ff0.js.map